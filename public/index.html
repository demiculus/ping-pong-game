<!DOCTYPE html>
<html>
<head>
	<title>Ping Pong Game</title>
</head>
<body style="margin: 0;">
	<canvas id="canvas"></canvas>
	<script type="text/javascript" src="js/app.js"></script>
	<script type="text/javascript">
		const redPlate = 'red-plate'
		const blackPlate = 'blac-plate'
		const ball = 'ball'

		app.onInit = function(){
			const plateMargin = this.height/20
			const plateHeight = this.height/10
			const plateWidth = plateHeight / 5

			const ballSize = plateWidth
			const plateVelocity = this.height/40

			this.nodes.push({
				id : redPlate,
				x  : plateMargin,
				y  : this.height/2 - plateHeight/2,
				width  : plateWidth,
				height : plateHeight,
				color  : 'red',
				direction : 0
			});

			this.nodes.push({
				id : blackPlate,
				x  : this.width - plateMargin,
				y  : this.height/2 - plateHeight/2,
				width  : plateWidth,
				height : plateHeight,
				color  : 'black'
			});

			this.nodes.push({
				id : ball,
				x  : this.width/2 - ballSize/2,
				y  : this.height/2 - ballSize/2,
				width  : ballSize,
				height : ballSize,
				color  : 'purple'
			});
			window.addEventListener('keypress', function (e) {
				if(e.key == 'w') app.getNode(redPlate).y -= plateVelocity;
				if(e.key == 's') app.getNode(redPlate).y += plateVelocity;
				if(e.key == 'i') app.getNode(blackPlate).y -= plateVelocity;
				if(e.key == 'k') app.getNode(blackPlate).y += plateVelocity;
				if(e.keyCode == 32) startGame();
			});
		};

		app.onUpdate = function(time){
			this.getNode(blackPlate).y++;

			if(Math.cos(this.timestamp / 100) > 0){
				this.getNode(redPlate).direction = -1;
			}else{
				this.getNode(redPlate).direction = 1;
			}

			this.getNode(redPlate).x+=this.getNode(redPlate).direction;
		};

		function startGame() {
			console.log('start game')
		}
	</script>
</body>
</html>